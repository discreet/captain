#!/usr/bin/env ruby
#
# This will run a clean maven test. It is configured to run from the root of the
# project. If all tests pass it will exit 0.
#
require 'English'
require_relative '../lib/success'
require_relative '../lib/test'
require_relative '../lib/scriptdir'

@test = maven

def mavenTest
  Dir.chdir(Script.dir)

  Dir.chdir('../../') do
    Test.maven('clean test')
    Success.success(@test) if $CHILD_STATUS.exitstatus.zero?
    exit $CHILD_STATUS.exitstatus
  end
end
mavenTest
